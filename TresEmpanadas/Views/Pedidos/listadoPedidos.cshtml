@model IEnumerable<TresEmpanadas.Pedido>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.NombreNegocio)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FechaCreacion)
        </th>
        <th>
            @Html.DisplayName("Estado Pedido")
        </th>
        <th>
            @Html.DisplayName("Rol")
        </th>
        <th>
            @Html.DisplayName("Acciones")
        </th>
        <th></th>
    </tr>

    @foreach (var item in ((List<Pedido>)ViewBag.pedidosUsuario))
    {
    <tr>
        <td>
            <label value=""> @item.NombreNegocio</label>
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.FechaCreacion)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.EstadoPedido.Nombre)
        </td>
        @if (Convert.ToInt32(System.Web.HttpContext.Current.Session["IdUsuario"]) == item.IdUsuarioResponsable)
        {
            <td>
                @Html.Raw("Responsable")
            </td>
            <td>
                @Html.ActionLink("EditarPedido", "EditarPedido", new { id = item.IdPedido })|
                @Html.ActionLink("DetallePedido", "DetallePedido", new { id = item.IdPedido }) |
                @Html.ActionLink("Eliminar", "Eliminar", new { id = item.IdPedido })
            </td>
        }
        else
        {
            <td>
                @Html.Raw("Invitado")
            </td>
            <td>
                @Html.ActionLink("DetallePedido", "DetallePedido", new { id = item.IdPedido })
            </td>
        }

            @*@if (Convert.ToInt32(System.Web.HttpContext.Current.Session["IdUsuario"]) == item.IdUsuarioResponsable)
            {
                @Html.ActionLink("EditarPedido", "EditarPedido", new { id = item.IdPedido })

                //@Html.Raw("link editar");
            } |*@

        
    </tr>
    }

</table>
<p><a href="~/Pedidos/IniciarPedido" class="btn btn-primary btn-lg">Nuevo &raquo;</a></p>
